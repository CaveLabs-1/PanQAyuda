{% extends "base.html" %}
{% block title %}Agregar Compra{% endblock title %}
{% block navbar %}{% include "navbar.html" %}{% endblock navbar %}
{% block header %}
  <header>
    <h2 class="center-align">Agregar Compra</h2>
  </header>
{% endblock header %}
{% block content %}
  <div class="container">
    <div class="card paquete-catalogo-form">

      <form class="" action="{% url 'compras:agregar_compra' %}" id="form" method="post">
        <br>
        <br>
        <div class="row">
          <div class="input-field col m6">
            <select id="id_proveedor" class="" name="proveedor" required>
              <option disabled selected>Selecciona un proveedor</option>
              {% for proveedor in proveedores %}
              <option value="{{proveedor.id}}">{{proveedor.nombre}}</option>
              {% endfor %}
            </select>
          </div>
          <div class="input-field col m6">
            <input type="text" class="datepicker" name="fecha_compra" id='datepicker' required>
            <label for="fecha_compra">Fecha de Compra</label>
          </div>
          {%csrf_token%}
        </div>
        <div class="row">
          <div class="col s6">
            <a class="btn waves-effect waves-light pink" href="/paquetes/lista_paquetes">Regresar
              <i class="material-icons left">chevron_left</i>
            </a>
          </div>
          <div class="col s6 right-align btn-agregar-paquete">
            <button type="submit" class="agregar-btn waves-effect waves-light btn pink">Agregar</button>
          </div>
        </div>
      </form>

    </div>
  </div>
{% endblock content %}

{% block js %}
<script>

$('select').formSelect();

var elem = document.querySelector('.datepicker');
var instance = M.Datepicker.init(elem);

// Or with jQuery

$(document).ready(function(){
  $('.datepicker').datepicker({
    format: 'dd-mm-yy',
    minDate: new Date(),
  });
});

//Poner la fecha de hoy por default
var todayAux=new Date();
var dd = todayAux.getDate();
var mm = todayAux.getMonth()+1; //Enero es 0
var yyyy = todayAux.getFullYear();

dd = (dd<10)? '0'+dd : dd;
mm = (mm<10)? '0'+mm : mm;

var today = dd + '/' + mm + '/' + yyyy;
document.getElementById("datepicker").value =today;

</script>
{% endblock js %}
